# 红外探测器测试控制应用程序

基于Python和Tkinter开发。

## 项目概述

本应用程序主要用于红外探测器测试阶段使用，主要功能包括：

- 图像采集和显示，支持摄像头、测试视频、离线文件
- 多种非均匀性校正算法
- 坏点检测和补偿
- 图像增强和预处理
- 像素级分析和ROI标记

## 文件结构

### 核心模块

- **`main_app.py`** - 主应用程序，软件进入口
- **`ui_config.py`** - 界面配置模块，负责创建和管理所有UI组件
- **`camera_functions.py`** - 相机功能模块，包含所有相机控制和图像处理功能
- **`preprocessor.py`** - 图像预处理模块，提供各种图像处理算法

## 运行

```bash
python main_app.py
```

### 数据源参数设置

- **摄像头序号**: 在数据源区域设置
- **数据源类型**: 摄像头/测试视频/离线文件
- **波段选择**: mwir/lwir/swir
- **位深设置**: 默认4095

## 主要功能

### 数据源管理

- **摄像头模式**: 支持硬件红外摄像头实时采集
- **测试视频模式**: 使用模拟数据进行功能测试
- **离线文件模式**: 加载本地图像文件进行处理
- **动态切换**: 运行时可在不同数据源间切换

### 图像存储功能

- **背景图保存**: 保存当前帧作为背景参考
- **亮场图保存**: 保存亮场参考图像
- **自动批量保存**: 可设置保存张数，自动保存指定数量的图像
- **连续保存**: 手动控制开始/停止连续保存
- 注: 自动批量保存在文件夹"auto_images"，连续保存保存在文件夹"manual"，所有图片按时戳命名，格式为16位".png"（所见即所存，保存原始图片时需要点击显示原图）

### 非均匀性校正和图像预处理

- **单点校正**: 支持两种单点校正模式 (b-) 和 (-b)
- **多点校正**: 线性多点校正算法
- **非线性校正**: 二次多项式校正算法
- **明暗校正**: 基于明暗场的两点校正
- **校正文件加载**: 支持NPZ格式校正参数文件
- **图像预处理**：支持多种预处理测试

### 坏点处理

- **坏点检测**: 基于统计方法的坏点自动检测
- **查表补偿**: 使用预存坏点表进行补偿
- **坏点文件加载**: 支持加载NPZ格式坏点文件
- **实时补偿**: 检测后立即应用补偿算法

### 像素分析功能

- **坐标获取**: 点击图像获取像素坐标
- **ROI标记**: 在图像上标记感兴趣区域
- **像素值显示**: 实时显示ROI区域像素值
- **极值计算**: 计算ROI区域的最大值和最小值
- **放大视图**: 弹出窗口显示ROI区域放大图像

### 图像显示

- **自适应显示**: 支持任意大小图像的显示
- **多种显示模式**:
  - 适应模式：保持宽高比，适应窗口大小
  - 拉伸模式：填充整个显示区域
  - 原始模式：显示原始大小
- **窗口大小自适应**: 最大化界面时自动调整图像显示
- **实时缩放**: 窗口大小变化时实时调整图像显示

## 使用

### 基本操作流程

1. **启动应用程序**: 运行 `python main_app.py`
2. **选择数据源**: 在数据源区域选择摄像头、测试视频或离线文件
3. **配置参数**: 设置设备号、波段、位深等参数
4. **开始采集**: 点击"开始"按钮启动数据源
5. **图像处理**: 使用各种校正和处理功能
6. **保存结果**: 保存处理后的图像或校正参数

### 校正操作流程

1. **保存背景图**: 在无目标情况下保存背景参考
2. **保存亮场图**: 在均匀亮场下保存亮场参考
3. **计算校正**: 使用"计算黑白场校正"生成校正参数
4. **应用校正**: 选择相应的校正方法应用到图像

### 坏点处理流程

1. **坏点检测**: 点击"坏点检测"自动检测坏点
2. **加载坏点文件**: 使用"加载坏点文件"加载预存坏点表
3. **查表补偿**: 启用"查表补偿"应用坏点补偿
